"use strict";(self.webpackChunkwallet_sign=self.webpackChunkwallet_sign||[]).push([[896],{75538:function(e,t,n){n.r(t),n.d(t,{CoinbaseWalletSDK:function(){return Tt},createCoinbaseWalletSDK:function(){return Ot},default:function(){return Ut}});var r=n(15671),s=n(43144),a=function(e,t){var n;switch(e){case"standard":default:return n=t,"data:image/svg+xml,%3Csvg width='".concat(t,"' height='").concat(n,"' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E ");case"circle":return n=t,"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(t,"' height='").concat(n,"' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E");case"text":return n=(.1*t).toFixed(2),"data:image/svg+xml,%3Csvg width='".concat(t,"' height='").concat(n,"' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E");case"textWithLogo":return n=(.25*t).toFixed(2),"data:image/svg+xml,%3Csvg width='".concat(t,"' height='").concat(n,"' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E");case"textLight":return n=(.1*t).toFixed(2),"data:image/svg+xml,%3Csvg width='".concat(t,"' height='").concat(n,"' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E");case"textWithLogoLight":return n=(.25*t).toFixed(2),"data:image/svg+xml,%3Csvg width='".concat(t,"' height='").concat(n,"' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E")}},i=n(74165),o=n(15861),c=n(60136),u=n(29388),l=n(29439),d=function(){function e(t,n){(0,r.Z)(this,e),this.scope=t,this.module=n}return(0,s.Z)(e,[{key:"storeObject",value:function(e,t){this.setItem(e,JSON.stringify(t))}},{key:"loadObject",value:function(e){var t=this.getItem(e);return t?JSON.parse(t):void 0}},{key:"setItem",value:function(e,t){localStorage.setItem(this.scopedKey(e),t)}},{key:"getItem",value:function(e){return localStorage.getItem(this.scopedKey(e))}},{key:"removeItem",value:function(e){localStorage.removeItem(this.scopedKey(e))}},{key:"clear",value:function(){for(var e=this.scopedKey(""),t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);"string"===typeof r&&r.startsWith(e)&&t.push(r)}t.forEach((function(e){return localStorage.removeItem(e)}))}},{key:"scopedKey",value:function(e){return"-".concat(this.scope).concat(this.module?":".concat(this.module):"",":").concat(e)}}],[{key:"clearAll",value:function(){new e("CBWSDK").clear(),new e("walletlink").clear()}}]),e}(),h=n(93433),p=n(98737),f={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},v={userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902},m={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},b="Unspecified error message.",g="Unspecified server error.";function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;if(e&&Number.isInteger(e)){var n=e.toString();if(C(m,n))return m[n].message;if(k(e))return g}return t}function y(e){if(!Number.isInteger(e))return!1;var t=e.toString();return!!m[t]||!!k(e)}function k(e){return e>=-32099&&e<=-32e3}function x(e){return e&&"object"===typeof e&&!Array.isArray(e)?Object.assign({},e):e}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Z(e,t){return"object"===typeof e&&null!==e&&t in e&&"string"===typeof e[t]}var E={parse:function(e){return M(f.parse,e)},invalidRequest:function(e){return M(f.invalidRequest,e)},invalidParams:function(e){return M(f.invalidParams,e)},methodNotFound:function(e){return M(f.methodNotFound,e)},internal:function(e){return M(f.internal,e)},server:function(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");var t=e.code;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return M(t,e)},invalidInput:function(e){return M(f.invalidInput,e)},resourceNotFound:function(e){return M(f.resourceNotFound,e)},resourceUnavailable:function(e){return M(f.resourceUnavailable,e)},transactionRejected:function(e){return M(f.transactionRejected,e)},methodNotSupported:function(e){return M(f.methodNotSupported,e)},limitExceeded:function(e){return M(f.limitExceeded,e)}},I={userRejectedRequest:function(e){return S(v.userRejectedRequest,e)},unauthorized:function(e){return S(v.unauthorized,e)},unsupportedMethod:function(e){return S(v.unsupportedMethod,e)},disconnected:function(e){return S(v.disconnected,e)},chainDisconnected:function(e){return S(v.chainDisconnected,e)},unsupportedChain:function(e){return S(v.unsupportedChain,e)},custom:function(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");var t=e.code,n=e.message,r=e.data;if(!n||"string"!==typeof n)throw new Error('"message" must be a nonempty string');return new P(t,n,r)}};function M(e,t){var n=A(t),r=(0,l.Z)(n,2),s=r[0],a=r[1];return new L(e,s||w(e),a)}function S(e,t){var n=A(t),r=(0,l.Z)(n,2),s=r[0],a=r[1];return new P(e,s||w(e),a)}function A(e){if(e){if("string"===typeof e)return[e];if("object"===typeof e&&!Array.isArray(e)){var t=e.message,n=e.data;if(t&&"string"!==typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}var L=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,s,a){var i;if((0,r.Z)(this,n),!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!s||"string"!==typeof s)throw new Error('"message" must be a nonempty string.');return(i=t.call(this,s)).code=e,void 0!==a&&(i.data=a),i}return(0,s.Z)(n)}((0,p.Z)(Error)),P=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,s,a){if((0,r.Z)(this,n),!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');return t.call(this,e,s,a)}return(0,s.Z)(n)}(L);var R=function(e){return e},D=function(e){return e},N=function(e){return e};function j(e){return Math.floor(e)}var T=/^[0-9]*$/,_=/^[a-f0-9]*$/;function O(e){return U(crypto.getRandomValues(new Uint8Array(e)))}function U(e){return(0,h.Z)(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function q(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return Number.parseInt(e,16)})))}function W(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.toString("hex");return R(t?"0x".concat(n):n)}function V(e){return W(X(e),!0)}function H(e){return N(e.toString(10))}function K(e){return R("0x".concat(BigInt(e).toString(16)))}function z(e){return e.startsWith("0x")||e.startsWith("0X")}function B(e){return z(e)?e.slice(2):e}function G(e){return z(e)?"0x".concat(e.slice(2)):"0x".concat(e)}function F(e){if("string"!==typeof e)return!1;var t=B(e).toLowerCase();return _.test(t)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"===typeof e){var n=B(e).toLowerCase();if(_.test(n))return R(t?"0x".concat(n):n)}throw E.invalidParams('"'.concat(String(e),'" is not a hexadecimal string'))}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=J(e,!1);return n.length%2===1&&(n=R("0".concat(n))),t?R("0x".concat(n)):n}function Q(e){if("string"===typeof e){var t=B(e).toLowerCase();if(F(t)&&40===t.length)return D(G(t))}throw E.invalidParams("Invalid Ethereum address: ".concat(String(e)))}function X(e){if(Buffer.isBuffer(e))return e;if("string"===typeof e){if(F(e)){var t=Y(e,!1);return Buffer.from(t,"hex")}return Buffer.from(e,"utf8")}throw E.invalidParams("Not binary data: ".concat(String(e)))}function $(e){if("number"===typeof e&&Number.isInteger(e))return j(e);if("string"===typeof e){if(T.test(e))return j(Number(e));if(F(e))return j(Number(BigInt(Y(e,!0))))}throw E.invalidParams("Not an integer: ".concat(String(e)))}function ee(e){if(null!==e&&("bigint"===typeof e||function(e){if(null==e||"function"!==typeof e.constructor)return!1;var t=e.constructor;return"function"===typeof t.config&&"number"===typeof t.EUCLID}(e)))return BigInt(e.toString(10));if("number"===typeof e)return BigInt($(e));if("string"===typeof e){if(T.test(e))return BigInt(e);if(F(e))return BigInt(Y(e,!0))}throw E.invalidParams("Not an integer: ".concat(String(e)))}function te(e){if("string"===typeof e)return JSON.parse(e);if("object"===typeof e)return e;throw E.invalidParams("Not a JSON string or an object: ".concat(String(e)))}function ne(){var e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),t=document.location,n=t.protocol,r=t.host,s=e?e.getAttribute("href"):null;return!s||s.startsWith("javascript:")||s.startsWith("vbscript:")?"".concat(n,"//").concat(r,"/favicon.ico"):s.startsWith("http://")||s.startsWith("https://")||s.startsWith("data:")?s:s.startsWith("//")?n+s:"".concat(n,"//").concat(r).concat(s)}function re(){return se.apply(this,arguments)}function se(){return(se=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",crypto.subtle.deriveKey({name:"ECDH",public:n},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return ce.apply(this,arguments)}function ce(){return(ce=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=crypto.getRandomValues(new Uint8Array(12)),e.next=3,crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,(new TextEncoder).encode(n));case 3:return s=e.sent,e.abrupt("return",{iv:r,cipherText:s});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t){return le.apply(this,arguments)}function le(){return(le=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.iv,s=n.cipherText,e.next=3,crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,s);case 3:return a=e.sent,e.abrupt("return",(new TextDecoder).decode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}function he(e,t){return pe.apply(this,arguments)}function pe(){return(pe=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=de(t),e.next=3,crypto.subtle.exportKey(r,n);case 3:return s=e.sent,e.abrupt("return",U(new Uint8Array(s)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=de(t),s=q(n).buffer,e.next=4,crypto.subtle.importKey(r,new Uint8Array(s),{name:"ECDH",namedCurve:"P-256"},!0,"private"===t?["deriveKey"]:[]);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return be.apply(this,arguments)}function be(){return(be=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t,(function(e,t){if(!(t instanceof Error))return t;var n=t;return Object.assign(Object.assign({},n.code?{code:n.code}:{}),{message:n.message})})),e.abrupt("return",oe(n,r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){return we.apply(this,arguments)}function we(){return(we=(0,o.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,ue(n,t);case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye={storageKey:"ownPrivateKey",keyType:"private"},ke={storageKey:"ownPublicKey",keyType:"public"},xe={storageKey:"peerPublicKey",keyType:"public"},Ce=function(){function e(){(0,r.Z)(this,e),this.storage=new d("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}return(0,s.Z)(e,[{key:"getOwnPublicKey",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadKeysIfNeeded();case 2:return e.abrupt("return",this.ownPublicKey);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSharedSecret",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadKeysIfNeeded();case 2:return e.abrupt("return",this.sharedSecret);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPeerPublicKey",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sharedSecret=null,this.peerPublicKey=t,e.next=4,this.storeKey(xe,t);case 4:return e.next=6,this.loadKeysIfNeeded();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(ke.storageKey),this.storage.removeItem(ye.storageKey),this.storage.removeItem(xe.storageKey);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateKeyPair",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return t=e.sent,this.ownPrivateKey=t.privateKey,this.ownPublicKey=t.publicKey,e.next=7,this.storeKey(ye,t.privateKey);case 7:return e.next=9,this.storeKey(ke,t.publicKey);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKeysIfNeeded",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.ownPrivateKey){e.next=4;break}return e.next=3,this.loadKey(ye);case 3:this.ownPrivateKey=e.sent;case 4:if(null!==this.ownPublicKey){e.next=8;break}return e.next=7,this.loadKey(ke);case 7:this.ownPublicKey=e.sent;case 8:if(null!==this.ownPrivateKey&&null!==this.ownPublicKey){e.next=11;break}return e.next=11,this.generateKeyPair();case 11:if(null!==this.peerPublicKey){e.next=15;break}return e.next=14,this.loadKey(xe);case 14:this.peerPublicKey=e.sent;case 15:if(null!==this.sharedSecret){e.next=21;break}if(null!==this.ownPrivateKey&&null!==this.peerPublicKey){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,ae(this.ownPrivateKey,this.peerPublicKey);case 20:this.sharedSecret=e.sent;case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadKey",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.storage.getItem(t.storageKey)){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",fe(t.keyType,n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"storeKey",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t.keyType,n);case 2:r=e.sent,this.storage.setItem(t.storageKey,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ze="4.3.0",Ee="@coinbase/wallet-sdk";function Ie(e,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,s,a,o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},t),{jsonrpc:"2.0",id:crypto.randomUUID()}),e.next=3,window.fetch(n,{method:"POST",body:JSON.stringify(r),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":Ze,"X-Cbw-Sdk-Platform":Ee}});case 3:return s=e.sent,e.next=6,s.json();case 6:if(a=e.sent,o=a.result,!(c=a.error)){e.next=11;break}throw c;case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){var t,n,r=e.metadata,s=e.preference,a=r.appName,i=r.appLogoUrl,o=r.appChainIds;if("smartWalletOnly"!==s.options){var c=globalThis.coinbaseWalletExtension;if(c)return null===(t=c.setAppInfo)||void 0===t||t.call(c,a,i,o,s),c}var u=function(){var e,t;try{var n=globalThis;return null!==(e=n.ethereum)&&void 0!==e?e:null===(t=n.top)||void 0===t?void 0:t.ethereum}catch(r){return}}();if(null===u||void 0===u?void 0:u.isCoinbaseBrowser)return null===(n=u.setAppInfo)||void 0===n||n.call(u,a,i,o,s),u}function Ae(e){if(!e||"object"!==typeof e||Array.isArray(e))throw E.invalidParams({message:"Expected a single, non-array, object argument.",data:e});var t=e.method,n=e.params;if("string"!==typeof t||0===t.length)throw E.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==n&&!Array.isArray(n)&&("object"!==typeof n||null===n))throw E.invalidParams({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw I.unsupportedMethod()}}var Le="accounts",Pe="activeChain",Re="availableChains",De="walletCapabilities",Ne=function(){function e(t){var n,s,a;(0,r.Z)(this,e),this.metadata=t.metadata,this.communicator=t.communicator,this.callback=t.callback,this.keyManager=new Ce,this.storage=new d("CBWSDK","SCWStateManager"),this.accounts=null!==(n=this.storage.loadObject(Le))&&void 0!==n?n:[],this.chain=this.storage.loadObject(Pe)||{id:null!==(a=null===(s=t.metadata.appChainIds)||void 0===s?void 0:s[0])&&void 0!==a?a:1},this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}return(0,s.Z)(e,[{key:"handshake",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u,l,d,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=(n=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(n);case 2:return e.next=4,this.createRequestMessage({handshake:{method:t.method,params:Object.assign({},this.metadata,null!==(s=t.params)&&void 0!==s?s:{})}});case 4:return o=e.sent,e.next=7,this.communicator.postRequestAndWaitForResponse(o);case 7:if(!("failure"in(c=e.sent).content)){e.next=10;break}throw c.content.failure;case 10:return e.next=12,fe("public",c.sender);case 12:return u=e.sent,e.next=15,this.keyManager.setPeerPublicKey(u);case 15:return e.next=17,this.decryptResponseMessage(c);case 17:if(l=e.sent,!("error"in(d=l.result))){e.next=21;break}throw d.error;case 21:e.t0=t.method,e.next="eth_requestAccounts"===e.t0?24:29;break;case 24:return h=d.value,this.accounts=h,this.storage.storeObject(Le,h),null===(a=this.callback)||void 0===a||a.call(this,"accountsChanged",h),e.abrupt("break",29);case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.accounts.length){e.next=6;break}e.t0=t.method,e.next="wallet_sendCalls"===e.t0?4:5;break;case 4:case 17:return e.abrupt("return",this.sendRequestToPopup(t));case 5:throw I.unauthorized();case 6:e.t1=t.method,e.next="eth_requestAccounts"===e.t1?9:"eth_accounts"===e.t1?11:"eth_coinbase"===e.t1?12:"net_version"===e.t1?13:"eth_chainId"===e.t1?14:"wallet_getCapabilities"===e.t1?15:"wallet_switchEthereumChain"===e.t1?16:"eth_ecRecover"===e.t1||"personal_sign"===e.t1||"wallet_sign"===e.t1||"personal_ecRecover"===e.t1||"eth_signTransaction"===e.t1||"eth_sendTransaction"===e.t1||"eth_signTypedData_v1"===e.t1||"eth_signTypedData_v3"===e.t1||"eth_signTypedData_v4"===e.t1||"eth_signTypedData"===e.t1||"wallet_addEthereumChain"===e.t1||"wallet_watchAsset"===e.t1||"wallet_sendCalls"===e.t1||"wallet_showCallsStatus"===e.t1||"wallet_grantPermissions"===e.t1?17:18;break;case 9:return null===(n=this.callback)||void 0===n||n.call(this,"connect",{chainId:K(this.chain.id)}),e.abrupt("return",this.accounts);case 11:return e.abrupt("return",this.accounts);case 12:return e.abrupt("return",this.accounts[0]);case 13:return e.abrupt("return",this.chain.id);case 14:return e.abrupt("return",K(this.chain.id));case 15:return e.abrupt("return",this.storage.loadObject(De));case 16:return e.abrupt("return",this.handleSwitchChainRequest(t));case 18:if(this.chain.rpcUrl){e.next=20;break}throw E.internal("No RPC URL set for chain");case 20:return e.abrupt("return",Ie(t,this.chain.rpcUrl));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendRequestToPopup",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=(n=this.communicator).waitForPopupLoaded)||void 0===r?void 0:r.call(n);case 2:return e.next=4,this.sendEncryptedRequest(t);case 4:return s=e.sent,e.next=7,this.decryptResponseMessage(s);case 7:if(a=e.sent,!("error"in(o=a.result))){e.next=11;break}throw o.error;case 11:return e.abrupt("return",o.value);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cleanup",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.storage.clear(),e.next=3,this.keyManager.clear();case 3:this.accounts=[],this.chain={id:null!==(n=null===(t=this.metadata.appChainIds)||void 0===t?void 0:t[0])&&void 0!==n?n:1};case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSwitchChainRequest",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.params)&&(null===(n=r[0])||void 0===n?void 0:n.chainId)){e.next=3;break}throw E.invalidParams();case 3:if(s=$(r[0].chainId),!this.updateChain(s)){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,this.sendRequestToPopup(t);case 9:return null===(a=e.sent)&&this.updateChain(s),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEncryptedRequest",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.keyManager.getSharedSecret();case 2:if(n=e.sent){e.next=5;break}throw I.unauthorized("No valid session found, try requestAccounts before other methods");case 5:return e.next=7,me({action:t,chainId:this.chain.id},n);case 7:return r=e.sent,e.next=10,this.createRequestMessage({encrypted:r});case 10:return s=e.sent,e.abrupt("return",this.communicator.postRequestAndWaitForResponse(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createRequestMessage",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=he,e.next=3,this.keyManager.getOwnPublicKey();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)("public",e.t1);case 6:return n=e.sent,e.abrupt("return",{id:crypto.randomUUID(),sender:n,content:t,timestamp:new Date});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decryptResponseMessage",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("failure"in(s=t.content))){e.next=3;break}throw s.failure;case 3:return e.next=5,this.keyManager.getSharedSecret();case 5:if(a=e.sent){e.next=8;break}throw I.unauthorized("Invalid session");case 8:return e.next=10,ge(s.encrypted,a);case 10:return o=e.sent,(c=null===(n=o.data)||void 0===n?void 0:n.chains)&&(u=Object.entries(c).map((function(e){var t=(0,l.Z)(e,2),n=t[0],r=t[1];return{id:Number(n),rpcUrl:r}})),this.storage.storeObject(Re,u),this.updateChain(this.chain.id,u)),(d=null===(r=o.data)||void 0===r?void 0:r.capabilities)&&this.storage.storeObject(De,d),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateChain",value:function(e,t){var n,r=null!==t&&void 0!==t?t:this.storage.loadObject(Re),s=null===r||void 0===r?void 0:r.find((function(t){return t.id===e}));return!!s&&(s!==this.chain&&(this.chain=s,this.storage.storeObject(Pe,s),null===(n=this.callback)||void 0===n||n.call(this,"chainChanged",K(s.id))),!0)}}]),e}(),je=n.p+"static/media/index.d5b35ece7c425af5eaae.cjs",Te="Addresses";function _e(e){return void 0!==e.errorMessage}var Oe,Ue=function(){function e(t){(0,r.Z)(this,e),this.secret=t}return(0,s.Z)(e,[{key:"encrypt",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u,l,d,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(64===(n=this.secret).length){e.next=3;break}throw Error("secret must be 256 bits");case 3:return r=crypto.getRandomValues(new Uint8Array(12)),e.next=6,crypto.subtle.importKey("raw",q(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]);case 6:return s=e.sent,a=new TextEncoder,e.next=10,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},s,a.encode(t));case 10:return o=e.sent,16,c=o.slice(o.byteLength-16),u=o.slice(0,o.byteLength-16),l=new Uint8Array(c),d=new Uint8Array(u),p=new Uint8Array([].concat((0,h.Z)(r),(0,h.Z)(l),(0,h.Z)(d))),e.abrupt("return",U(p));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"decrypt",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(64===(n=this.secret).length){e.next=3;break}throw Error("secret must be 256 bits");case 3:return e.abrupt("return",new Promise((function(e,r){(0,o.Z)((0,i.Z)().mark((function s(){var a,o,c,u,l,d,p,f,v;return(0,i.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,crypto.subtle.importKey("raw",q(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]);case 2:return a=s.sent,o=q(t),c=o.slice(0,12),u=o.slice(12,28),l=o.slice(28),d=new Uint8Array([].concat((0,h.Z)(l),(0,h.Z)(u))),p={name:"AES-GCM",iv:new Uint8Array(c)},s.prev=9,s.next=12,window.crypto.subtle.decrypt(p,a,d);case 12:f=s.sent,v=new TextDecoder,e(v.decode(f)),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(9),r(s.t0);case 20:case"end":return s.stop()}}),s,null,[[9,17]])})))()})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qe=function(){function e(t,n,s){(0,r.Z)(this,e),this.linkAPIUrl=t,this.sessionId=n;var a="".concat(n,":").concat(s);this.auth="Basic ".concat(btoa(a))}return(0,s.Z)(e,[{key:"markUnseenEventsAsSeen",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){return fetch("".concat(n.linkAPIUrl,"/events/").concat(e.eventId,"/seen"),{method:"POST",headers:{Authorization:n.auth}})}))).catch((function(e){return console.error("Unabled to mark event as failed:",e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchUnseenEvents",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,s,a,o,c=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.linkAPIUrl,"/events?unseen=true"),{headers:{Authorization:this.auth}});case 2:if(!(n=e.sent).ok){e.next=14;break}return e.next=6,n.json();case 6:if(r=e.sent,s=r.events,!(a=r.error)){e.next=11;break}throw new Error("Check unseen events failed: ".concat(a));case 11:return o=null!==(t=null===s||void 0===s?void 0:s.filter((function(e){return"Web3Response"===e.event})).map((function(e){return{type:"Event",sessionId:c.sessionId,eventId:e.id,event:e.event,data:e.data}})))&&void 0!==t?t:[],this.markUnseenEventsAsSeen(o),e.abrupt("return",o);case 14:throw new Error("Check unseen events failed: ".concat(n.status));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"}(Oe||(Oe={}));var We=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WebSocket;(0,r.Z)(this,e),this.WebSocketClass=n,this.webSocket=null,this.pendingData=[],this.url=t.replace(/^http/,"ws")}return(0,s.Z)(e,[{key:"setConnectionStateListener",value:function(e){this.connectionStateListener=e}},{key:"setIncomingDataListener",value:function(e){this.incomingDataListener=e}},{key:"connect",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.webSocket){e.next=2;break}throw new Error("webSocket object is not null");case 2:return e.abrupt("return",new Promise((function(e,n){var r,s;try{t.webSocket=s=new t.WebSocketClass(t.url)}catch(a){return void n(a)}null===(r=t.connectionStateListener)||void 0===r||r.call(t,Oe.CONNECTING),s.onclose=function(e){var r;t.clearWebSocket(),n(new Error("websocket error ".concat(e.code,": ").concat(e.reason))),null===(r=t.connectionStateListener)||void 0===r||r.call(t,Oe.DISCONNECTED)},s.onopen=function(n){var r;(e(),null===(r=t.connectionStateListener)||void 0===r||r.call(t,Oe.CONNECTED),t.pendingData.length>0)&&((0,h.Z)(t.pendingData).forEach((function(e){return t.sendData(e)})),t.pendingData=[])},s.onmessage=function(e){var n,r;if("h"===e.data)null===(n=t.incomingDataListener)||void 0===n||n.call(t,{type:"Heartbeat"});else try{var s=JSON.parse(e.data);null===(r=t.incomingDataListener)||void 0===r||r.call(t,s)}catch(a){}}})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e,t=this.webSocket;if(t){this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,Oe.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(n){}}}},{key:"sendData",value:function(e){var t=this.webSocket;if(!t)return this.pendingData.push(e),void this.connect();t.send(e)}},{key:"clearWebSocket",value:function(){var e=this.webSocket;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}]),e}(),Ve=function(){function e(t){var n=this,s=t.session,a=t.linkAPIUrl,c=t.listener;(0,r.Z)(this,e),this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=j(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=function(e){e&&new Map([["__destroyed",n.handleDestroyed],["EthereumAddress",n.handleAccountUpdated],["WalletUsername",n.handleWalletUsernameUpdated],["AppVersion",n.handleAppVersionUpdated],["ChainId",function(t){return e.JsonRpcUrl&&n.handleChainUpdated(t,e.JsonRpcUrl)}]]).forEach((function(t,n){var r=e[n];void 0!==r&&t(r)}))},this.handleDestroyed=function(e){var t;"1"===e&&(null===(t=n.listener)||void 0===t||t.resetAndReload())},this.handleAccountUpdated=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cipher.decrypt(t);case 2:s=e.sent,null===(r=n.listener)||void 0===r||r.accountUpdated(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleMetadataUpdated=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cipher.decrypt(r);case 2:a=e.sent,null===(s=n.listener)||void 0===s||s.metadataUpdated(t,a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.handleWalletUsernameUpdated=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.handleMetadataUpdated("walletUsername",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleAppVersionUpdated=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.handleMetadataUpdated("AppVersion",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleChainUpdated=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var s,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cipher.decrypt(t);case 2:return a=e.sent,e.next=5,n.cipher.decrypt(r);case 5:o=e.sent,null===(s=n.listener)||void 0===s||s.chainUpdated(a,o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.session=s,this.cipher=new Ue(s.secret),this.listener=c;var u=new We("".concat(a,"/rpc"),WebSocket);u.setConnectionStateListener(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,e.t0=t,e.next=e.t0===Oe.DISCONNECTED?4:e.t0===Oe.CONNECTED?6:e.t0===Oe.CONNECTING?13:14;break;case 4:return n.destroyed||(s=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,5e3)}));case 2:n.destroyed||u.connect().catch((function(){s()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s()),e.abrupt("break",14);case 6:return e.next=8,n.handleConnected();case 8:return r=e.sent,n.updateLastHeartbeat(),setInterval((function(){n.heartbeat()}),1e4),n.shouldFetchUnseenEventsOnConnect&&n.fetchUnseenEventsAPI(),e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:n.connected!==r&&(n.connected=r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u.setIncomingDataListener((function(e){var t;switch(e.type){case"Heartbeat":return void n.updateLastHeartbeat();case"IsLinkedOK":case"Linked":var r="IsLinkedOK"===e.type?e.linked:void 0;n.linked=r||e.onlineGuests>0;break;case"GetSessionConfigOK":case"SessionConfigUpdated":n.handleSessionMetadataUpdated(e.metadata);break;case"Event":n.handleIncomingEvent(e)}void 0!==e.id&&(null===(t=n.requestResolutions.get(e.id))||void 0===t||t(e))})),this.ws=u,this.http=new qe(a,s.id,s.key)}return(0,s.Z)(e,[{key:"connect",value:function(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}},{key:"destroy",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.makeRequest({type:"SetSessionConfig",id:j(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3});case 4:this.destroyed=!0,this.ws.disconnect(),this.listener=void 0;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connected",get:function(){return this._connected},set:function(e){this._connected=e}},{key:"linked",get:function(){return this._linked},set:function(e){var t,n;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(n=this.listener)||void 0===n||n.linkedUpdated(e)}},{key:"setOnceLinked",value:function(e){var t=this;return new Promise((function(n){t.linked?e().then(n):t.onceLinked=function(){e().then(n),t.onceLinked=void 0}}))}},{key:"handleIncomingEvent",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Event"===t.type&&"Web3Response"===t.event){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.cipher.decrypt(t.data);case 4:if(r=e.sent,"WEB3_RESPONSE"===(s=JSON.parse(r)).type){e.next=8;break}return e.abrupt("return");case 8:a=s.id,o=s.response,null===(n=this.listener)||void 0===n||n.handleWeb3ResponseMessage(a,o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkUnseenEvents",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connected){e.next=3;break}return this.shouldFetchUnseenEventsOnConnect=!0,e.abrupt("return");case 3:return e.next=5,new Promise((function(e){return setTimeout(e,250)}));case 5:return e.prev=5,e.next=8,this.fetchUnseenEventsAPI();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Unable to check for unseen events",e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchUnseenEventsAPI",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.shouldFetchUnseenEventsOnConnect=!1,e.next=3,this.http.fetchUnseenEvents();case 3:e.sent.forEach((function(e){return t.handleIncomingEvent(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishEvent",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,s,a,c=this,u=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],e.next=3,this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},n),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"})));case 3:return s=e.sent,a={type:"PublishEvent",id:j(this.nextReqId++),sessionId:this.session.id,event:t,data:s,callWebhook:r},e.abrupt("return",this.setOnceLinked((0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.makeRequest(a);case 2:if("Fail"!==(t=e.sent).type){e.next=5;break}throw new Error(t.error||"failed to publish event");case 5:return e.abrupt("return",t.eventId);case 6:case"end":return e.stop()}}),e)})))));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendData",value:function(e){this.ws.sendData(JSON.stringify(e))}},{key:"updateLastHeartbeat",value:function(){this.lastHeartbeatResponse=Date.now()}},{key:"heartbeat",value:function(){if(Date.now()-this.lastHeartbeatResponse>2e4)this.ws.disconnect();else try{this.ws.sendData("h")}catch(e){}}},{key:"makeRequest",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a=this,o=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{timeout:6e4},r=t.id,this.sendData(t),e.abrupt("return",Promise.race([new Promise((function(e,t){s=window.setTimeout((function(){t(new Error("request ".concat(r," timed out")))}),n.timeout)})),new Promise((function(e){a.requestResolutions.set(r,(function(t){clearTimeout(s),e(t),a.requestResolutions.delete(r)}))}))]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleConnected",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.makeRequest({type:"HostSession",id:j(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key});case 2:if("Fail"!==e.sent.type){e.next=5;break}return e.abrupt("return",!1);case 5:return this.sendData({type:"IsLinked",id:j(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:j(this.nextReqId++),sessionId:this.session.id}),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),He=function(){function e(){(0,r.Z)(this,e),this._nextRequestId=0,this.callbacks=new Map}return(0,s.Z)(e,[{key:"makeRequestId",value:function(){this._nextRequestId=(this._nextRequestId+1)%2147483647;var e=this._nextRequestId,t=G(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}]),e}(),Ke=n(18677);function ze(e,t,n){return e&t^e&n^t&n}var Be=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e,s,a,i){var o;return(0,r.Z)(this,n),(o=t.call(this)).finished=!1,o.length=0,o.pos=0,o.destroyed=!1,o.blockLen=e,o.outputLen=s,o.padOffset=a,o.isLE=i,o.buffer=new Uint8Array(e),o.view=(0,Ke.GL)(o.buffer),o}return(0,s.Z)(n,[{key:"update",value:function(e){(0,Ke.$h)(this),e=(0,Ke.O0)(e),(0,Ke.gk)(e);for(var t=this.view,n=this.buffer,r=this.blockLen,s=e.length,a=0;a<s;){var i=Math.min(r-this.pos,s-a);if(i!==r)n.set(e.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===r&&(this.process(t,0),this.pos=0);else for(var o=(0,Ke.GL)(e);r<=s-a;a+=r)this.process(o,a)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){(0,Ke.$h)(this),(0,Ke.eB)(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,s=this.isLE,a=this.pos;t[a++]=128,(0,Ke.ru)(this.buffer.subarray(a)),this.padOffset>r-a&&(this.process(n,0),a=0);for(var i=a;i<r;i++)t[i]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);var s=BigInt(32),a=BigInt(4294967295),i=Number(n>>s&a),o=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+u,o,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);var o=(0,Ke.GL)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<u;d++)o.setUint32(4*d,l[d],s)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,(0,h.Z)(this.get()));var n=this.blockLen,r=this.buffer,s=this.length,a=this.finished,i=this.destroyed,o=this.pos;return e.destroyed=i,e.finished=a,e.length=s,e.pos=o,s%n&&e.buffer.set(r),e}},{key:"clone",value:function(){return this._cloneInto()}}]),n}(Ke.kb),Ge=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Je=new Uint32Array(64),Ye=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return(0,r.Z)(this,n),(e=t.call(this,64,s,8,!1)).A=0|Ge[0],e.B=0|Ge[1],e.C=0|Ge[2],e.D=0|Ge[3],e.E=0|Ge[4],e.F=0|Ge[5],e.G=0|Ge[6],e.H=0|Ge[7],e}return(0,s.Z)(n,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,s,a,i,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|a,this.G=0|i,this.H=0|o}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Je[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var s=Je[r-15],a=Je[r-2],i=(0,Ke.np)(s,7)^(0,Ke.np)(s,18)^s>>>3,o=(0,Ke.np)(a,17)^(0,Ke.np)(a,19)^a>>>10;Je[r]=o+Je[r-7]+i+Je[r-16]|0}var c,u=this.A,l=this.B,d=this.C,h=this.D,p=this.E,f=this.F,v=this.G,m=this.H;for(n=0;n<64;n++){var b=m+((0,Ke.np)(p,6)^(0,Ke.np)(p,11)^(0,Ke.np)(p,25))+((c=p)&f^~c&v)+Fe[n]+Je[n]|0,g=((0,Ke.np)(u,2)^(0,Ke.np)(u,13)^(0,Ke.np)(u,22))+ze(u,l,d)|0;m=v,v=f,f=p,p=h+b|0,h=d,d=l,l=u,u=b+g|0}u=u+this.A|0,l=l+this.B|0,d=d+this.C|0,h=h+this.D|0,p=p+this.E|0,f=f+this.F|0,v=v+this.G|0,m=m+this.H|0,this.set(u,l,d,h,p,f,v,m)}},{key:"roundClean",value:function(){(0,Ke.ru)(Je)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),(0,Ke.ru)(this.buffer)}}]),n}(Be),Qe=(0,Ke.V1)((function(){return new Ye})),Xe="session:id",$e="session:secret",et="session:linked",tt=function(){function e(t,n,s){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,r.Z)(this,e),this.storage=t,this.id=n,this.secret=s,this.key=(0,Ke.ci)(Qe("".concat(n,", ").concat(s," WalletLink"))),this._linked=!!a}return(0,s.Z)(e,[{key:"linked",get:function(){return this._linked},set:function(e){this._linked=e,this.persistLinked()}},{key:"save",value:function(){return this.storage.setItem(Xe,this.id),this.storage.setItem($e,this.secret),this.persistLinked(),this}},{key:"persistLinked",value:function(){this.storage.setItem(et,this._linked?"1":"0")}}],[{key:"create",value:function(t){return new e(t,O(16),O(32)).save()}},{key:"load",value:function(t){var n=t.getItem(Xe),r=t.getItem(et),s=t.getItem($e);return n&&s?new e(t,n,s,"1"===r):null}}]),e}();function nt(){try{return function(){try{return null!==window.frameElement}catch(e){return!1}}()&&window.top?window.top.location:window.location}catch(e){return window.location}}function rt(){var e,t;return null!==(t=null===(e=null===window||void 0===window?void 0:window.matchMedia)||void 0===e?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)&&void 0!==t&&t}function st(){var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode('@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')),document.documentElement.appendChild(e)}var at=n(28182),it=n(58620),ot=n(31374),ct=function(){function e(){(0,r.Z)(this,e),this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=rt()}return(0,s.Z)(e,[{key:"attach",value:function(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}},{key:"presentItem",value:function(e){var t=this,n=this.nextItemKey++;return this.items.set(n,e),this.render(),function(){t.items.delete(n),t.render()}}},{key:"clear",value:function(){this.items.clear(),this.render()}},{key:"render",value:function(){this.root&&(0,it.render)((0,it.h)("div",null,(0,it.h)(ut,{darkMode:this.darkMode},Array.from(this.items.entries()).map((function(e){var t=(0,l.Z)(e,2),n=t[0],r=t[1];return(0,it.h)(lt,Object.assign({},r,{key:n}))})))),this.root)}}]),e}(),ut=function(e){return(0,it.h)("div",{class:(0,at.clsx)("-cbwsdk-snackbar-container")},(0,it.h)("style",null,".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"),(0,it.h)("div",{class:"-cbwsdk-snackbar"},e.children))},lt=function(e){var t=e.autoExpand,n=e.message,r=e.menuItems,s=(0,ot.useState)(!0),a=(0,l.Z)(s,2),i=a[0],o=a[1],c=(0,ot.useState)(null!==t&&void 0!==t&&t),u=(0,l.Z)(c,2),d=u[0],h=u[1];(0,ot.useEffect)((function(){var e=[window.setTimeout((function(){o(!1)}),1),window.setTimeout((function(){h(!0)}),1e4)];return function(){e.forEach(window.clearTimeout)}}));return(0,it.h)("div",{class:(0,at.clsx)("-cbwsdk-snackbar-instance",i&&"-cbwsdk-snackbar-instance-hidden",d&&"-cbwsdk-snackbar-instance-expanded")},(0,it.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:function(){h(!d)}},(0,it.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,it.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},n),(0,it.h)("div",{class:"-gear-container"},!d&&(0,it.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,it.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,it.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),r&&r.length>0&&(0,it.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},r.map((function(e,t){return(0,it.h)("div",{class:(0,at.clsx)("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},(0,it.h)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,it.h)("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),(0,it.h)("span",{class:(0,at.clsx)("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info))}))))},dt=function(){function e(){(0,r.Z)(this,e),this.attached=!1,this.snackbar=new ct}return(0,s.Z)(e,[{key:"attach",value:function(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");var e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,st()}},{key:"showConnecting",value:function(e){var t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}}]),e}(),ht=function(){function e(){(0,r.Z)(this,e),this.root=null,this.darkMode=rt()}return(0,s.Z)(e,[{key:"attach",value:function(){var e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),st()}},{key:"present",value:function(e){this.render(e)}},{key:"clear",value:function(){this.render(null)}},{key:"render",value:function(e){var t=this;this.root&&((0,it.render)(null,this.root),e&&(0,it.render)((0,it.h)(pt,Object.assign({},e,{onDismiss:function(){t.clear()},darkMode:this.darkMode})),this.root))}}]),e}(),pt=function(e){var t=e.title,n=e.buttonText,r=e.darkMode,s=e.onButtonClick,a=e.onDismiss,i=r?"dark":"light";return(0,it.h)(ut,{darkMode:r},(0,it.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,it.h)("style",null,".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"),(0,it.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:a}),(0,it.h)("div",{class:(0,at.clsx)("-cbwsdk-redirect-dialog-box",i)},(0,it.h)("p",null,t),(0,it.h)("button",{onClick:s},n))))},ft="https://www.walletlink.org",vt=function(){function e(){(0,r.Z)(this,e),this.attached=!1,this.redirectDialog=new ht}return(0,s.Z)(e,[{key:"attach",value:function(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}},{key:"redirectToCoinbaseWallet",value:function(e){var t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",nt().href),e&&t.searchParams.append("wl_url",e);var n=document.createElement("a");n.target="cbw-opener",n.href=t.href,n.rel="noreferrer noopener",n.click()}},{key:"openCoinbaseWalletDeeplink",value:function(e){var t=this;this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:function(){t.redirectToCoinbaseWallet(e)}}),setTimeout((function(){t.redirectToCoinbaseWallet(e)}),99)}},{key:"showConnecting",value:function(e){var t=this;return function(){t.redirectDialog.clear()}}}]),e}(),mt=function(){function e(t){var n=this;(0,r.Z)(this,e),this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=function(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)}(),this.linkedUpdated=function(e){n.isLinked=e;var t=n.storage.getItem(Te);if(e&&(n._session.linked=e),n.isUnlinkedErrorState=!1,t){var r=t.split(" "),s="true"===n.storage.getItem("IsStandaloneSigning");""===r[0]||e||!n._session.linked||s||(n.isUnlinkedErrorState=!0)}},this.metadataUpdated=function(e,t){n.storage.setItem(e,t)},this.chainUpdated=function(e,t){n.chainCallbackParams.chainId===e&&n.chainCallbackParams.jsonRpcUrl===t||(n.chainCallbackParams={chainId:e,jsonRpcUrl:t},n.chainCallback&&n.chainCallback(t,Number.parseInt(e,10)))},this.accountUpdated=function(t){n.accountsCallback&&n.accountsCallback([t]),e.accountRequestCallbackIds.size>0&&(Array.from(e.accountRequestCallbackIds.values()).forEach((function(e){n.invokeCallback(e,{method:"requestEthereumAccounts",result:[t]})})),e.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.metadata=t.metadata,this.accountsCallback=t.accountsCallback,this.chainCallback=t.chainCallback;var s=this.subscribe(),a=s.session,i=s.ui,o=s.connection;this._session=a,this.connection=o,this.relayEventManager=new He,this.ui=i,this.ui.attach()}return(0,s.Z)(e,[{key:"subscribe",value:function(){var e=tt.load(this.storage)||tt.create(this.storage),t=this.linkAPIUrl,n=new Ve({session:e,linkAPIUrl:t,listener:this}),r=this.isMobileWeb?new vt:new dt;return n.connect(),{session:e,ui:r,connection:n}}},{key:"resetAndReload",value:function(){var e=this;this.connection.destroy().then((function(){var t=tt.load(e.storage);(null===t||void 0===t?void 0:t.id)===e._session.id&&d.clearAll(),document.location.reload()})).catch((function(e){}))}},{key:"signEthereumTransaction",value:function(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:H(e.weiValue),data:W(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?H(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?H(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?H(e.gasPriceInWei):null,gasLimit:e.gasLimit?H(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}},{key:"signAndSubmitEthereumTransaction",value:function(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:H(e.weiValue),data:W(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?H(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?H(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?H(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?H(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}},{key:"submitEthereumTransaction",value:function(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:W(e,!0),chainId:t}})}},{key:"getWalletLinkSession",value:function(){return this._session}},{key:"sendRequest",value:function(e){var t=this,n=null,r=O(8),s=function(s){t.publishWeb3RequestCanceledEvent(r),t.handleErrorResponse(r,e.method,s),null===n||void 0===n||n()};return new Promise((function(a,i){n=t.ui.showConnecting({isUnlinkedErrorState:t.isUnlinkedErrorState,onCancel:s,onResetConnection:t.resetAndReload}),t.relayEventManager.callbacks.set(r,(function(e){if(null===n||void 0===n||n(),_e(e))return i(new Error(e.errorMessage));a(e)})),t.publishWeb3RequestEvent(r,e)}))}},{key:"publishWeb3RequestEvent",value:function(e,t){var n=this,r={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",r,!0).then((function(e){})).catch((function(e){n.handleWeb3ResponseMessage(r.id,{method:t.method,errorMessage:e.message})})),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}},{key:"openCoinbaseWalletDeeplink",value:function(e){var t=this;if(this.ui instanceof vt)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",(function(){window.addEventListener("focus",(function(){t.connection.checkUnseenEvents()}),{once:!0})}),{once:!0}),this.ui.openCoinbaseWalletDeeplink()}}},{key:"publishWeb3RequestCanceledEvent",value:function(e){var t={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",t,!1).then()}},{key:"publishEvent",value:function(e,t,n){return this.connection.publishEvent(e,t,n)}},{key:"handleWeb3ResponseMessage",value:function(t,n){var r=this;if("requestEthereumAccounts"===n.method)return e.accountRequestCallbackIds.forEach((function(e){return r.invokeCallback(e,n)})),void e.accountRequestCallbackIds.clear();this.invokeCallback(t,n)}},{key:"handleErrorResponse",value:function(e,t,n){var r,s=null!==(r=null===n||void 0===n?void 0:n.message)&&void 0!==r?r:"Unspecified error message.";this.handleWeb3ResponseMessage(e,{method:t,errorMessage:s})}},{key:"invokeCallback",value:function(e,t){var n=this.relayEventManager.callbacks.get(e);n&&(n(t),this.relayEventManager.callbacks.delete(e))}},{key:"requestEthereumAccounts",value:function(){var t=this,n=this.metadata,r={method:"requestEthereumAccounts",params:{appName:n.appName,appLogoUrl:n.appLogoUrl}},s=O(8);return new Promise((function(n,a){t.relayEventManager.callbacks.set(s,(function(e){if(_e(e))return a(new Error(e.errorMessage));n(e)})),e.accountRequestCallbackIds.add(s),t.publishWeb3RequestEvent(s,r)}))}},{key:"watchAsset",value:function(e,t,n,r,s,a){var i=this,o={method:"watchAsset",params:{type:e,options:{address:t,symbol:n,decimals:r,image:s},chainId:a}},c=null,u=O(8);return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:function(e){i.publishWeb3RequestCanceledEvent(u),i.handleErrorResponse(u,o.method,e),null===c||void 0===c||c()},onResetConnection:this.resetAndReload}),new Promise((function(e,t){i.relayEventManager.callbacks.set(u,(function(n){if(null===c||void 0===c||c(),_e(n))return t(new Error(n.errorMessage));e(n)})),i.publishWeb3RequestEvent(u,o)}))}},{key:"addEthereumChain",value:function(e,t,n,r,s,a){var i=this,o={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:r,chainName:s,iconUrls:n,nativeCurrency:a}},c=null,u=O(8);return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:function(e){i.publishWeb3RequestCanceledEvent(u),i.handleErrorResponse(u,o.method,e),null===c||void 0===c||c()},onResetConnection:this.resetAndReload}),new Promise((function(e,t){i.relayEventManager.callbacks.set(u,(function(n){if(null===c||void 0===c||c(),_e(n))return t(new Error(n.errorMessage));e(n)})),i.publishWeb3RequestEvent(u,o)}))}},{key:"switchEthereumChain",value:function(e,t){var n=this,r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},s=null,a=O(8);return s=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:function(e){n.publishWeb3RequestCanceledEvent(a),n.handleErrorResponse(a,r.method,e),null===s||void 0===s||s()},onResetConnection:this.resetAndReload}),new Promise((function(e,t){n.relayEventManager.callbacks.set(a,(function(n){return null===s||void 0===s||s(),_e(n)&&n.errorCode?t(I.custom({code:n.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):_e(n)?t(new Error(n.errorMessage)):void e(n)})),n.publishWeb3RequestEvent(a,r)}))}}]),e}();mt.accountRequestCallbackIds=new Set;var bt="DefaultChainId",gt="DefaultJsonRpcUrl",wt=function(){function e(t){(0,r.Z)(this,e),this._relay=null,this._addresses=[],this.metadata=t.metadata,this._storage=new d("walletlink",ft),this.callback=t.callback||null;var n=this._storage.getItem(Te);if(n){var s=n.split(" ");""!==s[0]&&(this._addresses=s.map((function(e){return Q(e)})))}this.initializeRelay()}return(0,s.Z)(e,[{key:"getSession",value:function(){var e=this.initializeRelay().getWalletLinkSession();return{id:e.id,secret:e.secret}}},{key:"handshake",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._eth_requestAccounts();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectedAddress",get:function(){return this._addresses[0]||void 0}},{key:"jsonRpcUrl",get:function(){var e;return null!==(e=this._storage.getItem(gt))&&void 0!==e?e:void 0},set:function(e){this._storage.setItem(gt,e)}},{key:"updateProviderInfo",value:function(e,t){var n;this.jsonRpcUrl=e;var r=this.getChainId();this._storage.setItem(bt,t.toString(10)),$(t)!==r&&(null===(n=this.callback)||void 0===n||n.call(this,"chainChanged",K(t)))}},{key:"watchAsset",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u,l,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Array.isArray(t)?t[0]:t).type){e.next=3;break}throw E.invalidParams("Type is required");case 3:if("ERC20"===(null===n||void 0===n?void 0:n.type)){e.next=5;break}throw E.invalidParams("Asset of type '".concat(n.type,"' is not supported"));case 5:if(null===n||void 0===n?void 0:n.options){e.next=7;break}throw E.invalidParams("Options are required");case 7:if(null===n||void 0===n?void 0:n.options.address){e.next=9;break}throw E.invalidParams("Address is required");case 9:return r=this.getChainId(),s=n.options,a=s.address,o=s.symbol,c=s.image,u=s.decimals,l=this.initializeRelay(),e.next=14,l.watchAsset(n.type,a,o,u,c,null===r||void 0===r?void 0:r.toString());case 14:if(!_e(d=e.sent)){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("return",!!d.result);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addEthereumChain",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u,l,d,h,p,f,v,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t[0],0!==(null===(n=s.rpcUrls)||void 0===n?void 0:n.length)){e.next=3;break}throw E.invalidParams("please pass in at least 1 rpcUrl");case 3:if(s.chainName&&""!==s.chainName.trim()){e.next=5;break}throw E.invalidParams("chainName is a required field");case 5:if(s.nativeCurrency){e.next=7;break}throw E.invalidParams("nativeCurrency is a required field");case 7:if((a=Number.parseInt(s.chainId,16))!==this.getChainId()){e.next=10;break}return e.abrupt("return",!1);case 10:return o=this.initializeRelay(),c=s.rpcUrls,u=void 0===c?[]:c,l=s.blockExplorerUrls,d=void 0===l?[]:l,h=s.chainName,p=s.iconUrls,f=void 0===p?[]:p,v=s.nativeCurrency,e.next=14,o.addEthereumChain(a.toString(),u,f,d,h,v);case 14:if(!_e(m=e.sent)){e.next=17;break}return e.abrupt("return",!1);case 17:if(!0!==(null===(r=m.result)||void 0===r?void 0:r.isApproved)){e.next=20;break}return this.updateProviderInfo(u[0],a),e.abrupt("return",null);case 20:throw E.internal("unable to add ethereum chain");case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchEthereumChain",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[0],r=Number.parseInt(n.chainId,16),s=this.initializeRelay(),e.next=5,s.switchEthereumChain(r.toString(10),this.selectedAddress||void 0);case 5:if(!_e(a=e.sent)){e.next=8;break}throw a;case 8:return(o=a.result).isApproved&&o.rpcUrl.length>0&&this.updateProviderInfo(o.rpcUrl,r),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cleanup",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_setAddresses",value:function(e,t){var n;if(!Array.isArray(e))throw new Error("addresses is not an array");var r=e.map((function(e){return Q(e)}));JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses=r,null===(n=this.callback)||void 0===n||n.call(this,"accountsChanged",r),this._storage.setItem(Te,r.join(" ")))}},{key:"request",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.params||[],e.t0=t.method,e.next="eth_accounts"===e.t0?4:"eth_coinbase"===e.t0?5:"net_version"===e.t0?6:"eth_chainId"===e.t0?7:"eth_requestAccounts"===e.t0?8:"eth_ecRecover"===e.t0||"personal_ecRecover"===e.t0?9:"personal_sign"===e.t0?10:"eth_signTransaction"===e.t0?11:"eth_sendRawTransaction"===e.t0?12:"eth_sendTransaction"===e.t0?13:"eth_signTypedData_v1"===e.t0||"eth_signTypedData_v3"===e.t0||"eth_signTypedData_v4"===e.t0||"eth_signTypedData"===e.t0?14:"wallet_addEthereumChain"===e.t0?15:"wallet_switchEthereumChain"===e.t0?16:"wallet_watchAsset"===e.t0?17:18;break;case 4:return e.abrupt("return",(0,h.Z)(this._addresses));case 5:return e.abrupt("return",this.selectedAddress||null);case 6:return e.abrupt("return",this.getChainId().toString(10));case 7:return e.abrupt("return",K(this.getChainId()));case 8:return e.abrupt("return",this._eth_requestAccounts());case 9:return e.abrupt("return",this.ecRecover(t));case 10:return e.abrupt("return",this.personalSign(t));case 11:return e.abrupt("return",this._eth_signTransaction(n));case 12:return e.abrupt("return",this._eth_sendRawTransaction(n));case 13:return e.abrupt("return",this._eth_sendTransaction(n));case 14:return e.abrupt("return",this.signTypedData(t));case 15:return e.abrupt("return",this.addEthereumChain(n));case 16:return e.abrupt("return",this.switchEthereumChain(n));case 17:return e.abrupt("return",this.watchAsset(n));case 18:if(this.jsonRpcUrl){e.next=20;break}throw E.internal("No RPC URL set for chain");case 20:return e.abrupt("return",Ie(t,this.jsonRpcUrl));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_ensureKnownAddress",value:function(e){var t=Q(e);if(!this._addresses.map((function(e){return Q(e)})).includes(t))throw new Error("Unknown Ethereum address")}},{key:"_prepareTransactionParams",value:function(e){var t=e.from?Q(e.from):this.selectedAddress;if(!t)throw new Error("Ethereum address is unavailable");return this._ensureKnownAddress(t),{fromAddress:t,toAddress:e.to?Q(e.to):null,weiValue:null!=e.value?ee(e.value):BigInt(0),data:e.data?X(e.data):Buffer.alloc(0),nonce:null!=e.nonce?$(e.nonce):null,gasPriceInWei:null!=e.gasPrice?ee(e.gasPrice):null,maxFeePerGas:null!=e.maxFeePerGas?ee(e.maxFeePerGas):null,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?ee(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?ee(e.gas):null,chainId:e.chainId?$(e.chainId):this.getChainId()}}},{key:"ecRecover",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.method,r=t.params,Array.isArray(r)){e.next=3;break}throw E.invalidParams();case 3:return s=this.initializeRelay(),e.next=6,s.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:V(r[0]),signature:V(r[1]),addPrefix:"personal_ecRecover"===n}});case 6:if(!_e(a=e.sent)){e.next=9;break}throw a;case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e;return Number.parseInt(null!==(e=this._storage.getItem(bt))&&void 0!==e?e:"1",10)}},{key:"_eth_requestAccounts",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._addresses.length>0)){e.next=3;break}return null===(t=this.callback)||void 0===t||t.call(this,"connect",{chainId:K(this.getChainId())}),e.abrupt("return",this._addresses);case 3:return r=this.initializeRelay(),e.next=6,r.requestEthereumAccounts();case 6:if(!_e(s=e.sent)){e.next=9;break}throw s;case 9:if(s.result){e.next=11;break}throw new Error("accounts received is empty");case 11:return this._setAddresses(s.result),null===(n=this.callback)||void 0===n||n.call(this,"connect",{chainId:K(this.getChainId())}),e.abrupt("return",this._addresses);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"personalSign",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.params,Array.isArray(n)){e.next=3;break}throw E.invalidParams();case 3:return r=n[1],s=n[0],this._ensureKnownAddress(r),a=this.initializeRelay(),e.next=9,a.sendRequest({method:"signEthereumMessage",params:{address:Q(r),message:V(s),addPrefix:!0,typedDataJson:null}});case 9:if(!_e(o=e.sent)){e.next=12;break}throw o;case 12:return e.abrupt("return",o.result);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_eth_signTransaction",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._prepareTransactionParams(t[0]||{}),r=this.initializeRelay(),e.next=4,r.signEthereumTransaction(n);case 4:if(!_e(s=e.sent)){e.next=7;break}throw s;case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_eth_sendRawTransaction",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X(t[0]),r=this.initializeRelay(),e.next=4,r.submitEthereumTransaction(n,this.getChainId());case 4:if(!_e(s=e.sent)){e.next=7;break}throw s;case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_eth_sendTransaction",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._prepareTransactionParams(t[0]||{}),r=this.initializeRelay(),e.next=4,r.signAndSubmitEthereumTransaction(n);case 4:if(!_e(s=e.sent)){e.next=7;break}throw s;case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.method,r=t.params,Array.isArray(r)){e.next=3;break}throw E.invalidParams();case 3:return s=function(e){return W({eth_signTypedData_v1:je.hashForSignTypedDataLegacy,eth_signTypedData_v3:je.hashForSignTypedData_v3,eth_signTypedData_v4:je.hashForSignTypedData_v4,eth_signTypedData:je.hashForSignTypedData_v4}[n]({data:te(e)}),!0)},a=r["eth_signTypedData_v1"===n?1:0],o=r["eth_signTypedData_v1"===n?0:1],this._ensureKnownAddress(a),c=this.initializeRelay(),e.next=10,c.sendRequest({method:"signEthereumMessage",params:{address:Q(a),message:s(o),typedDataJson:JSON.stringify(o,null,2),addPrefix:!1}});case 10:if(!_e(u=e.sent)){e.next=13;break}throw u;case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeRelay",value:function(){return this._relay||(this._relay=new mt({linkAPIUrl:ft,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}]),e}(),yt="SignerType",kt=new d("CBWSDK","SignerConfigurator");function xt(e){kt.setItem(yt,e)}function Ct(){return(Ct=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a,o,c,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.communicator,r=t.metadata,s=t.handshakeRequest,a=t.callback,Zt(n,r,a).catch((function(){})),o={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},t.preference),{handshakeRequest:s})},e.next=5,n.postRequestAndWaitForResponse(o);case 5:return c=e.sent,u=c.data,e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(e,t,n){return Et.apply(this,arguments)}function Et(){return(Et=(0,o.Z)((0,i.Z)().mark((function e(t,n,r){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onMessage((function(e){return"WalletLinkSessionRequest"===e.event}));case 2:return s=new wt({metadata:n,callback:r}),t.postMessage({event:"WalletLinkUpdate",data:{session:s.getSession()}}),e.next=6,s.handshake();case 6:t.postMessage({event:"WalletLinkUpdate",data:{connected:!0}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var It=function(){var e;return{getCrossOriginOpenerPolicy:function(){return void 0===e?"undefined":e},checkCrossOriginOpenerPolicy:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(){var n,r,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!==typeof window){t.next=3;break}return e="non-browser-env",t.abrupt("return");case 3:return t.prev=3,n="".concat(window.location.origin).concat(window.location.pathname),t.next=7,fetch(n,{method:"HEAD"});case 7:if((r=t.sent).ok){t.next=10;break}throw new Error("HTTP error! status: ".concat(r.status));case 10:s=r.headers.get("Cross-Origin-Opener-Policy"),"same-origin"===(e=null!==s&&void 0!==s?s:"null")&&console.error("Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.\n\nPlease see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information."),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),console.error("Error checking Cross-Origin-Opener-Policy:",t.t0.message),e="error";case 19:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(){return t.apply(this,arguments)}}()}}(),Mt=It.checkCrossOriginOpenerPolicy,St=It.getCrossOriginOpenerPolicy;function At(e){var t=(window.innerWidth-420)/2+window.screenX,n=(window.innerHeight-540)/2+window.screenY;!function(e){for(var t={sdkName:Ee,sdkVersion:Ze,origin:window.location.origin,coop:St()},n=0,r=Object.entries(t);n<r.length;n++){var s=(0,l.Z)(r[n],2),a=s[0],i=s[1];e.searchParams.append(a,i.toString())}}(e);var r="wallet_".concat(crypto.randomUUID()),s=window.open(e,r,"width=".concat(420,", height=").concat(540,", left=").concat(t,", top=").concat(n));if(null===s||void 0===s||s.focus(),!s)throw E.internal("Pop up window failed to open");return s}var Lt=(0,s.Z)((function e(t){var n=this,s=t.url,a=void 0===s?"https://keys.coinbase.com/connect":s,c=t.metadata,u=t.preference;(0,r.Z)(this,e),this.popup=null,this.listeners=new Map,this.postMessage=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.waitForPopupLoaded();case 2:e.sent.postMessage(t,n.url.origin);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postRequestAndWaitForResponse=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.onMessage((function(e){return e.requestId===t.id})),n.postMessage(t),e.next=4,r;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onMessage=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var s=function r(s){if(s.origin===n.url.origin){var a=s.data;t(a)&&(e(a),window.removeEventListener("message",r),n.listeners.delete(r))}};window.addEventListener("message",s),n.listeners.set(s,{reject:r})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.disconnect=function(){var e;(e=n.popup)&&!e.closed&&e.close(),n.popup=null,n.listeners.forEach((function(e,t){(0,e.reject)(I.userRejectedRequest("Request rejected")),window.removeEventListener("message",t)})),n.listeners.clear()},this.waitForPopupLoaded=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.popup||n.popup.closed){e.next=3;break}return n.popup.focus(),e.abrupt("return",n.popup);case 3:return n.popup=At(n.url),n.onMessage((function(e){return"PopupUnload"===e.event})).then(n.disconnect).catch((function(){})),e.abrupt("return",n.onMessage((function(e){return"PopupLoaded"===e.event})).then((function(e){n.postMessage({requestId:e.id,data:{version:Ze,metadata:n.metadata,preference:n.preference,location:window.location.toString()}})})).then((function(){if(!n.popup)throw E.internal();return n.popup})));case 6:case"end":return e.stop()}}),e)}))),this.url=new URL(a),this.metadata=c,this.preference=u}));function Pt(e){var t=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldIncludeStack,n=void 0!==t&&t,r={};if(e&&"object"===typeof e&&!Array.isArray(e)&&C(e,"code")&&y(e.code)){var s=e;r.code=s.code,s.message&&"string"===typeof s.message?(r.message=s.message,C(s,"data")&&(r.data=s.data)):(r.message=w(r.code),r.data={originalError:x(e)})}else r.code=f.internal,r.message=Z(e,"message")?e.message:b,r.data={originalError:x(e)};return n&&(r.stack=Z(e,"stack")?e.stack:void 0),r}(function(e){var t;if("string"===typeof e)return{message:e,code:f.internal};if(_e(e)){var n=e.errorMessage,r=null!==(t=e.errorCode)&&void 0!==t?t:n.match(/(denied|rejected)/i)?v.userRejectedRequest:void 0;return Object.assign(Object.assign({},e),{message:n,code:r,data:{method:e.method}})}return e}(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return n.searchParams.set("version",Ze),n.searchParams.set("code",t.code.toString()),n.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:n.href})}var Rt=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n)}(n(13631).v),Dt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},Nt=function(e){(0,c.Z)(n,e);var t=(0,u.Z)(n);function n(e){var s;(0,r.Z)(this,n);var a=e.metadata,i=e.preference,o=i.keysUrl,c=Dt(i,["keysUrl"]);(s=t.call(this)).signer=null,s.isCoinbaseWallet=!0,s.metadata=a,s.preference=c,s.communicator=new Lt({url:o,metadata:a,preference:c});var u=kt.getItem(yt);return u&&(s.signer=s.initSigner(u)),s}return(0,s.Z)(n,[{key:"request",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ae(t),this.signer){e.next=28;break}e.t0=t.method,e.next="eth_requestAccounts"===e.t0?6:"wallet_sendCalls"===e.t0?15:"wallet_getCallsStatus"===e.t0?24:"net_version"===e.t0?25:"eth_chainId"===e.t0?26:27;break;case 6:return e.next=8,this.requestSignerSelection(t);case 8:return n=e.sent,r=this.initSigner(n),e.next=12,r.handshake(t);case 12:return this.signer=r,xt(n),e.abrupt("break",28);case 15:return s=this.initSigner("scw"),e.next=18,s.handshake({method:"handshake"});case 18:return e.next=20,s.request(t);case 20:return a=e.sent,e.next=23,s.cleanup();case 23:return e.abrupt("return",a);case 24:return e.abrupt("return",Ie(t,"http://rpc.wallet.coinbase.com"));case 25:return e.abrupt("return",1);case 26:return e.abrupt("return",K(1));case 27:throw I.unauthorized("Must call 'eth_requestAccounts' before other methods");case 28:return e.next=30,this.signer.request(t);case 30:return e.abrupt("return",e.sent);case 33:return e.prev=33,e.t1=e.catch(0),e.t1.code===v.unauthorized&&this.disconnect(),e.abrupt("return",Promise.reject(Pt(e.t1)));case 38:case"end":return e.stop()}}),e,this,[[0,33]])})));return function(t){return e.apply(this,arguments)}}()},{key:"enable",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),e.next=3,this.request({method:"eth_requestAccounts"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.signer)||void 0===t?void 0:t.cleanup();case 2:this.signer=null,d.clearAll(),this.emit("disconnect",I.disconnected("User initiated disconnection"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignerSelection",value:function(e){return function(e){return Ct.apply(this,arguments)}({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:e,callback:this.emit.bind(this)})}},{key:"initSigner",value:function(e){return function(e){var t=e.signerType,n=e.metadata,r=e.communicator,s=e.callback;switch(t){case"scw":return new Ne({metadata:n,callback:s,communicator:r});case"walletlink":return new wt({metadata:n,callback:s})}}({signerType:e,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}]),n}(Rt);function jt(e){if(e){if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw new Error("Invalid options: ".concat(e.options));if(e.attribution&&void 0!==e.attribution.auto&&void 0!==e.attribution.dataSuffix)throw new Error("Attribution cannot contain both auto and dataSuffix properties")}}var Tt=function(){function e(t){(0,r.Z)(this,e),this.metadata={appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||ne(),appChainIds:t.appChainIds||[]},this.storeLatestVersion(),Mt()}return(0,s.Z)(e,[{key:"makeWeb3Provider",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{options:"all"};jt(t);var n={metadata:this.metadata,preference:t};return null!==(e=Se(n))&&void 0!==e?e:new Nt(n)}},{key:"getCoinbaseWalletLogo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:240;return a(e,t)}},{key:"storeLatestVersion",value:function(){new d("CBWSDK").setItem("VERSION",Ze)}}]),e}();var _t={options:"all"};function Ot(e){var t;new d("CBWSDK").setItem("VERSION",Ze),Mt();var n={metadata:{appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||"",appChainIds:e.appChainIds||[]},preference:Object.assign(_t,null!==(t=e.preference)&&void 0!==t?t:{})};jt(n.preference);var r=null;return{getProvider:function(){return r||(r=function(e){var t,n={metadata:e.metadata,preference:e.preference};return null!==(t=Se(n))&&void 0!==t?t:new Nt(n)}(n)),r}}}var Ut=Tt}}]);
//# sourceMappingURL=896.9d1be345.chunk.js.map